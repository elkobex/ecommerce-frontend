<div id="cartContainer text-center max-w-[1400px]">
  <section class="bg-white pb-8 pt-8 antialiased md:pb-16 md:pt-12">
    <div class="mx-auto max-w-[1400px] px-4 2xl:px-0">
      <div class="flex md:items-center space-x-2  mb-2">
        @if (isEskeleton()) {
          <div class="rounded-full bg-gray-200 h-10 w-10"></div>

          <div
            class="flex flex-col space-y-1 animate-pulse bg-gray-50 text-transparent"
          >
            <span class="text-2xl font-medium rounded-md bg-gray-200">
              <span class="invisible">¡Hemos recibido tu pedido!</span>
            </span>
            <span class="text-base bg-gray-200 rounded-md">
              <span class="invisible"
                >Tu pedido {{ currentOrder()?.orderId }} está completo y listo
                para ser enviado.</span
              >
            </span>
          </div>
        } @else {
          @if (currentType === "completed") {
            <img
              class="h-6 w-6 mt-2 md:h-8 md:w-8 md:mt-0"
              src="/assets/icons/accept.png"
              alt=""
              srcset=""
            />
            <div class="flex flex-col space-y-1">
              <span class="text-xl md:text-2xl font-medium text-slate-700"
                >¡Hemos recibido tu pedido!
              </span>
              <span class="text-base text-slate-800 rounded-md">
                <span
                  >Tu pedido {{ currentOrder()?.orderId }} está completo y listo
                  para ser enviado.</span
                >
              </span>
            </div>
          } @else {
            <div class="flex flex-col space-y-1">
              <span class="text-xl md:text-2xl font-medium text-slate-700"
                >Seguimiento del pedido {{ currentOrder()?.orderId }}
              </span>
              <span class="text-base text-slate-800 rounded-md">
                <span>Acontinuacion esta el estado de tu pedido.</span>
              </span>
            </div>
          }
        }
      </div>


      @if(isEskeleton()){
        <div class="flex items-start justify-center px-2 md:px-6 pb-6 animate-pulse">
            <div class="w-full">
              <div class="flex items-center w-full">
                <div class="w-8 h-8 shrink-0 mx-[-1px] bg-slate-200 p-1.5 flex items-center justify-center rounded-full relative">
                  <div class="bg-slate-300 rounded-full w-4 h-4"></div>
                </div>
                <div class="w-full h-[3px] mx-4 rounded-lg bg-slate-200"></div>
              </div>
            </div>
          
            <div class="w-full">
              <div class="flex items-center w-full">
                <div class="w-8 h-8 shrink-0 mx-[-1px] bg-slate-200 p-1.5 flex items-center justify-center rounded-full relative">
                  <div class="bg-slate-300 rounded-full w-4 h-4"></div>
                </div>
                <div class="w-full h-[3px] mx-4 rounded-lg bg-slate-200"></div>
              </div>
            </div>
          
            <div>
              <div class="flex items-center">
                <div class="w-8 h-8 shrink-0 mx-[-1px] bg-slate-200 p-1.5 flex items-center justify-center rounded-full relative">
                  <div class="bg-slate-300 rounded-full w-4 h-4"></div>
                </div>
              </div>
            </div>
          </div>
          
      }@else{
        <div class="flex items-start justify-center pt-4 px-2 md:px-6 pb-6">
            <div class="w-full">
              <div class="flex items-center w-full">
                <div
                  class="w-8 h-8 shrink-0 mx-[-1px] bg-[#051C2C] p-1.5 flex items-center justify-center rounded-full relative"
                >
                  <span class="text-sm text-white font-medium">1</span>
                  <span class="absolute -bottom-6 text-sm font-medium text-slate-800"
                    >Realizado</span
                  >
                </div>
                <div class="w-full h-[3px] mx-4 rounded-lg bg-[#051C2C]"></div>
              </div>
            </div>
    
            <div class="w-full">
              <div class="flex items-center w-full">
                <div
                  class="w-8 h-8 shrink-0 mx-[-1px] bg-[#051C2C] p-1.5 flex items-center justify-center rounded-full relative"
                >
                  <span class="text-sm text-white font-medium">2</span>
                  <span class="absolute -bottom-6 text-sm font-medium text-slate-800"
                    >Procesando</span
                  >
                </div>
                <div class="w-full h-[3px] mx-4 rounded-lg bg-gray-300"></div>
              </div>
            </div>
    
            <div>
              <div class="flex items-center">
                <div
                  class="w-8 h-8 shrink-0 mx-[-1px] bg-gray-200 p-1.5 flex items-center justify-center rounded-full relative"
                >
                  <span class="text-sm text-white font-medium">3</span>
                  <span class="absolute -bottom-6 text-sm font-medium text-gray-300"
                    >Enviado</span
                  >
                </div>
              </div>
            </div>
        </div>
      }


      <!-- <div class="my-4">
        <span class="text-red-500">{{calculateEstimatedDeliveryDate(currentOrder()?.orderDate, currentOrder()?.delivery).daysRemaining}}</span>
        <span>{{calculateEstimatedDeliveryDate(currentOrder()?.orderDate, currentOrder()?.delivery).estimatedDate}}</span>
      </div> -->

      <div
        class="mt-6 sm:mt-8 md:gap-6 lg:flex lg:items-start xl:gap-8 relative"
      >
        <div
          #articles
          class="mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl min-h-[30vh] md:min-h-[57vh] max-h-[75vh] overflow-y-auto"
        >
          <!-- <ol
              class="items-center flex w-full text-center text-sm font-medium text-gray-500 sm:text-base mb-8"
            >
              <li
                class="after:border-1 flex items-center after:mx-6 after:hidden after:h-1 after:w-full after:border-b after:border-gray-200 sm:after:inline-block sm:after:content-[''] md:w-full xl:after:mx-10"
              >
                <span
                  class="flex items-center after:mx-2 after:text-gray-200 after:content-['/'] dark:after:text-gray-500 sm:after:hidden"
                >
                  <svg
                    class="me-2 h-4 w-4 sm:h-5 sm:w-5"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                    />
                  </svg>
                  Carrito
                </span>
              </li>
  
              <li
                class="after:border-1 flex items-center after:mx-6 after:hidden after:h-1 after:w-full after:border-b sm:after:inline-block sm:after:content-[''] md:w-full xl:after:mx-10"
              >
                <span
                  class="flex items-center after:mx-2 after:text-gray-200 after:content-['/'] sm:after:hidden"
                >
                  <svg
                    class="me-2 h-4 w-4 sm:h-5 sm:w-5"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                    />
                  </svg>
                  Facturación
                </span>
              </li>
  
              <li class="flex shrink-0 items-center text-primary-700">
                <svg
                  class="me-2 h-4 w-4 sm:h-5 sm:w-5"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                  />
                </svg>
                Resumen del pedido
              </li>
            </ol> -->

          @if (!isEskeleton()) {
            <div class="space-y-6">
              @for (item of itemsCard; track $index) {
                <div
                  [ngClass]="{ 'border-t': $index === 0 }"
                  class="border-b border-gray-200 p-2 md:p-6"
                >
                  <div class="flex space-x-4 md:space-x-8">
                    <a href="#" class="shrink-0 md:order-1">
                      <img
                        class="h-20 md:h-24 md:w-20 rounded object-cover"
                        src="{{ serverUrl }}/{{ item.product.color?.imagen }}"
                        [alt]="item.product.name"
                      />
                    </a>

                    <div
                      class="hidden md:flex flex-col items-start md:order-3 md:justify-center"
                    >
                      <p class="text-base font-bold text-gray-900">
                        {{
                          item.product.price * item.quantity | currency: "MXN"
                        }}
                      </p>
                      <p class="text-gray-400 line-through">
                        {{ item.product.originalPrice | currency: "MXN" }}
                      </p>
                    </div>

                    <div
                      class="w-full min-w-0 flex-1 space-y-4 items-start md:order-2 md:max-w-md"
                    >
                      <a
                        href="javascript:void(0)"
                        class="text-lg font-medium text-gray-900 hover:underline"
                        >{{ item.product.name }}</a
                      >

                      <div
                        class="flex items-center justify-between md:justify-start gap-4"
                      >
                        <div class="flex items-center space-x-4 md:space-x-12">
                          <div class="bg-gray-100 rounded-md">
                            <span class="font-medium p-8">{{
                              item.quantity
                            }}</span>
                          </div>

                          <div class="flex flex-col justify-center md:hidden">
                            <p class="text-md font-bold text-gray-900">
                              {{
                                item.product.price * item.quantity
                                  | currency: "MXN"
                              }}
                            </p>
                            <p class="text-gray-400 line-through">
                              {{ item.product.originalPrice | currency: "MXN" }}
                            </p>
                          </div>
                        </div>
                      </div>

                      <div class="inline-flex items-center space-x-1">
                        <svg
                          viewBox="0 0 1024 1024"
                          version="1.1"
                          xmlns="http://www.w3.org/2000/svg"
                          width="1em"
                          height="1em"
                          role="img"
                          alt=""
                          aria-label=""
                          fill="#94a3b8"
                          aria-hidden="true"
                        >
                          <title>5&nbsp;categorias</title>
                          <path
                            d="M848.7 133.8c62.1 0 112.5 52.1 112.4 116.3l0 481c0 64.2-50.4 116.3-112.4 116.3l-212.5 0c-8.9 0-17.5 3.6-23.6 10.1l-86.8 90.5-0.8 0.8c-13 12.6-33.7 12.3-46.4-0.6l-88.5-90.9c-6.2-6.3-14.6-9.9-23.4-9.9l-191.4 0c-59.3 0-107.9-47.4-112.1-107.6l-0.3-8.7 0-481c0-64.2 50.4-116.3 112.4-116.3z m-329.7 178.4c-10-3.4-20.8 2.1-24.1 12.4l-34.2 106.1-108.2 0.8c-6 0-11.7 3-15.2 8-6.3 8.8-4.5 21.1 4 27.6l87.1 66.4-32.7 106.6c-1.8 5.9-0.8 12.4 2.7 17.4 6.1 8.9 18.1 10.9 26.6 4.6l88-65.1 88 65.1c4.9 3.6 11.1 4.6 16.8 2.7 10-3.3 15.6-14.4 12.4-24.7l-32.6-106.6 87-66.4c4.8-3.7 7.7-9.5 7.8-15.7 0.1-10.9-8.4-19.8-19-19.9l-108.1-0.8-34.2-106.1c-1.9-5.9-6.4-10.5-12.1-12.4z"
                          ></path>
                        </svg>
                        <span class="text-slate-600">{{
                          item.product.category
                        }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              } @empty {
                <div
                  class="flex flex-col items-center justify-center h-full space-x-2 pt-2 pb-8 rounded-b-lg"
                >
                  <svg
                    width="7em"
                    height="7em"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 1024 1024"
                    class="fill-current text-gray-400"
                  >
                    <path
                      d="M356.7 726.2c-30.6 0-55.5 24.8-55.5 55.5 0 30.6 24.8 55.5 55.5 55.4 30.6 0 55.5-24.8 55.5-55.4 0-30.6-24.8-55.5-55.5-55.5z m0 17.1c21.2 0 38.4 17.2 38.4 38.4 0 21.2-17.2 38.4-38.4 38.4-21.2 0-38.4-17.2-38.4-38.4 0-21.2 17.2-38.4 38.4-38.4z m319.1-17.1c-30.6 0-55.5 24.8-55.4 55.5 0 30.6 24.8 55.5 55.4 55.4 30.6 0 55.5-24.8 55.5-55.4 0-30.6-24.8-55.5-55.5-55.5z m0 17.1c21.2 0 38.4 17.2 38.4 38.4 0 21.2-17.2 38.4-38.4 38.4-21.2 0-38.4-17.2-38.4-38.4 0-21.2 17.2-38.4 38.4-38.4z m-552.8-486.9c4.8 0 9.3 0.3 15.4 1.4 9.3 1.6 18.4 4.6 27 9.4 15.4 8.6 27.5 22 35 40.7l1 2.9 0.4 1.3 8.3 45.7 11.1 63.9 24.8 144.8 7.2 42.8c6.1 34.3 38 60 76 61l2.4 0 358.2 0c38.4 0 71-25.1 78.1-59.4l0.4-2.1 50.1-248.1c0.9-4.6 5.4-7.6 10.1-6.7 4.3 0.9 7.2 4.8 6.8 9.1l-0.1 1-50.2 247.8c-7.4 42.8-46.6 74.3-92.7 75.4l-2.5 0.1-358.2 0c-47.1 0-87.5-31.7-95.2-75.2l-24.4-143.5-15.4-88.8-9-50.4-2.4-13.5-0.9-2.2c-5.6-13.9-14.2-23.7-25-30.4l-2.2-1.3c-6.8-3.8-14.2-6.2-21.7-7.5-4.1-0.7-7.3-1-10.4-1.1l-2 0-87.9 0c-4.7 0-8.5-3.8-8.6-8.5 0-4.4 3.3-8 7.6-8.5l1-0.1 87.9 0z m283.6 265.2l0 17.1-58 0 0-17.1 58 0z m92.2 0l0 17.1-58.1 0 0-17.1 58.1 0z m92.1 0l0 17.1-58 0 0-17.1 58 0z m92.2 0l0 17.1-58 0 0-17.1 58 0z m-329.8-155.8l0 17.1-58 0 0-17.1 58 0z m92.2 0l0 17.1-58 0 0-17.1 58 0z m92.1 0l0 17.1-58 0 0-17.1 58 0z m92.2 0l0 17.1-58 0 0-17.1 58 0z m92.2 0l0 17.1-58.1 0 0-17.1 58.1 0z"
                    ></path>
                  </svg>
                  <div lass="text-center px-1" bis_skin_checked="1">
                    El carrito de compras está vacío.
                  </div>

                  <div class="mt-2">
                    <a
                      href="javascript:void(0)"
                      class="inline-block px-4 py-2 text-sm text-slate-700 border border-slate-700 bg-white rounded-md shadow transition-transform duration-300 ease-in-out transform hover:scale-105"
                    >
                      Ver productos
                    </a>
                  </div>

                  <div class="h-[4.8rem]"></div>
                </div>
                <!-- <div class="w-full flex justify-center items-center">
                  </div> -->
              }
            </div>
          } @else {
            <div class="space-y-6 animate-pulse">
              @for (item of fakeItems; track $index) {
                <div class="border-b border-gray-200 p-2 md:p-6">
                  <div class="flex space-x-4 md:space-x-8">
                    <div class="shrink-0 md:order-1">
                      <div
                        class="bg-gray-200 w-16 h-20 md:h-24 md:w-20 rounded object-cover"
                      ></div>
                    </div>

                    <div
                      class="hidden md:flex flex-col items-start md:order-3 md:justify-center space-y-1 text-transparent"
                    >
                      <p class="bg-gray-200 rounded-md text-base font-bold">
                        <span class="invisible">MX$000.00</span>
                      </p>
                      <p class="bg-gray-200 rounded-md">
                        <span class="invisible">MX$000.00</span>
                      </p>
                    </div>

                    <div
                      class="w-full min-w-0 flex-1 space-y-4 items-start md:order-2 md:max-w-md"
                    >
                      <div
                        class="bg-gray-200 rounded-md text-lg text-transparent"
                      >
                        <span class="invisible"
                          >Sandalias de Diapositivas Psycho Bunny Bunny Logo
                          Hombre Negros</span
                        >
                      </div>

                      <div
                        class="flex items-center justify-between md:justify-start gap-4"
                      >
                        <div
                          class="flex items-center space-x-4 md:space-x-8 text-transparent"
                        >
                          <div class="bg-gray-200 rounded-md h-10 w-14"></div>

                          <!-- inline-flex items-center md:hidden -->
                          <div class="flex flex-col justify-center md:hidden">
                            <p class="bg-gray-200 rounded-md text-md">
                              <span class="invisible">MX$000.00</span>
                            </p>
                          </div>

                          <div class="bg-gray-200 rounded-md hidden md:block">
                            <span class="invisible">Boton eliminar</span>
                          </div>
                        </div>

                        <div
                          class="bg-gray-200 flex items-center rounded-full md:hidden relative"
                        >
                          <div class="w-8 h-8"></div>
                        </div>
                      </div>

                      <div class="inline-flex items-center space-x-1">
                        <span class="bg-gray-200 rounded-md text-transparent">
                          <span class="invisible"
                            >Sandalias de Diapositivas</span
                          >
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              }
            </div>
          }

          @if(!isEskeleton()){
              <div class="border border-gray-200 md:border-none rounded-lg mt-4">
                  <div class="flex flex-col space-y-2 p-4 md:p-0 justify-center">
                    <div class="flex justify-between">
                        <span class="">Total de artículos:</span>
                        <span class="">
                            {{ currenPricing().totalOriginalPrices| currency: "MXN" }}
                        </span>
                        
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-800">Descuento de artículo(s):</span>
                        <span class="text-slate-800">{{ currenPricing().totalDiscont| currency: "MXN" }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-800">Envio:</span>
                        <span class="text-slate-800">{{  currenPricing().shippingPrice | currency: "MXN" }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-slate-800">Total:</span>
                        <span class="font-semibold text-slate-800">{{  currenPricing().totalPrice| currency: "MXN" }}</span>
                    </div>
                  </div>
              </div>
          }
        </div>

        <div class="mx-auto mt-6 max-w-4xl flex-1 space-y-6 lg:mt-0 lg:w-full">
          @if (!isEskeleton()) {
            <div
              class="space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6"
            >
              <!-- <p class="text-xl font-semibold text-gray-900">
                  Resumen del pedido
                </p> -->

              <div class="flex flex-col space-y-8">
                <div class="flex flex-col space-y-2">
                  <span class="font-semibold text-slate-800"
                    >Dirección de Envío</span
                  >

                  <span class="inline-flex flex-wrap text-slate-700">
                    {{ currentOrder()?.fullName }}
                  </span>

                  <span class="inline-flex flex-wrap text-gray-700">
                    <span>{{ currentOrder()?.address }}</span>
                    <span>,&nbsp;</span>
                    <span
                      >{{
                        currentOrder()?.state?.name
                          ? currentOrder()?.state?.name
                          : ""
                      }}
                      ({{
                        currentOrder()?.state?.code
                          ? currentOrder()?.state?.code
                          : ""
                      }})</span
                    >
                    <span>,&nbsp;</span>
                    <span>{{
                      currentOrder()?.zipCode ? currentOrder()?.zipCode : ""
                    }}</span>
                    <span>,&nbsp;</span>
                    <span>{{
                      currentOrder()?.country?.name
                        ? currentOrder()?.country?.name
                        : ""
                    }}</span>
                  </span>
                </div>

                <div class="flex flex-col space-y-2">
                  <span class="font-semibold text-slate-800"
                    >Dirección de Facturación</span
                  >

                  <span class="inline-flex flex-wrap text-slate-700">
                    {{ currentOrder()?.fullName }}
                  </span>

                  <span class="inline-flex flex-wrap text-gray-700">
                    <span>{{ currentOrder()?.address }}</span>
                    <span>,&nbsp;</span>
                    <span
                      >{{
                        currentOrder()?.state?.name
                          ? currentOrder()?.state?.name
                          : ""
                      }}
                      ({{
                        currentOrder()?.state?.code
                          ? currentOrder()?.state?.code
                          : ""
                      }})</span
                    >
                    <span>,&nbsp;</span>
                    <span>{{
                      currentOrder()?.zipCode ? currentOrder()?.zipCode : ""
                    }}</span>
                    <span>,&nbsp;</span>
                    <span>{{
                      currentOrder()?.country?.name
                        ? currentOrder()?.country?.name
                        : ""
                    }}</span>
                  </span>
                </div>

                <div class="flex flex-col space-y-2">
                  <span class="font-semibold text-slate-800"
                    >Información de Pago</span
                  >

                  <span class="flex flex-col">
                    <span class="text-slate-700">Tarjeta de Crédito</span>
                    <div class="inline-flex items-center space-x-2">
                      @if (currentOrder()?.cardType === "Visa") {
                        <img
                          class="h-12 w-12"
                          src="/assets/icons/visa.svg"
                          alt=""
                          srcset=""
                        />
                      } @else if (currentOrder()?.cardType === "Mastercard") {
                        <img
                          class="h-12 w-12"
                          src="/assets/icons/mastercard.svg"
                          alt=""
                          srcset=""
                        />
                      }
                      <span class="font-medium text-slate-700">**** 4660</span>
                    </div>
                  </span>
                </div>
              </div>
            </div>
          } @else {
            <div
              class="space-y-4 rounded-lg bg-gray-50 p-4 shadow-sm sm:p-6 animate-pulse"
            >
              <div class="h-6 bg-gray-200 rounded"></div>

              <div class="space-y-4">
                <div class="space-y-2">
                  <!-- Total de artículos -->
                  <div class="flex items-center justify-between gap-4">
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                  </div>

                  <!-- Descuento de artículo(s) -->
                  <div class="flex items-center justify-between gap-4">
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                  </div>

                  <!-- Ahorro -->
                  <div class="flex items-center justify-between gap-4">
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                  </div>

                  <!-- Cantidad -->
                  <div class="flex items-center justify-between gap-4">
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                    <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                  </div>
                </div>

                <!-- Total estimado -->
                <div
                  class="flex items-center justify-between gap-4 border-t border-gray-200 pt-2"
                >
                  <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                  <div class="h-6 bg-gray-200 rounded w-1/4"></div>
                </div>

                <!-- Fechas Estimadas de Envío -->
                <div class="flex flex-col space-y-1 rounded-md p-1">
                  <div class="h-6 bg-gray-200 rounded w-full"></div>
                  <div class="h-6 bg-gray-200 rounded w-3/4"></div>
                  <div class="h-6 bg-gray-200 rounded w-3/4"></div>
                  <div class="h-6 bg-gray-200 rounded w-full"></div>
                </div>

                <!-- Oferta de envío -->
                <div class="flex space-x-1">
                  <div class="h-6 bg-gray-200 rounded w-full"></div>
                </div>
              </div>

              <!-- Botón Hacer pedido -->
              <div class="h-10 bg-gray-200 rounded w-full"></div>

              <!-- Continuar comprando -->
              <div class="flex items-center justify-center gap-2">
                <div class="h-6 bg-gray-200 rounded w-1/4"></div>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </section>
</div>
